language: node_js

node_js:
  - 4

sudo: false

env:
  global:
    # CODECLIMATE_REPO_TOKEN
    - secure: ihRpp1gFZulqR5oLKVFlHb50tXAinK4tlXsciQZTSX9BceaSRaFiNo8qbX6ks9vmrmuuB4Fnp+BkfXYcRJw/UDv5vyR5aG5Sil311dGgzwwZKWpWVBuSPwmIEXYQgZkhu9unWWJlySWNp1jNeSAtDDhk5wCusSKC4NdMJhZGqwzKeT17hpBpq+Mi9rUw+5c/8yGdqjUiso7vHXELY8aoqDz5fJ3Ar3yXKNeyvsINLQy/5AwgjWQgcbJdBLWDRY0eLKuqaG7bJ6kCuOMmTyOic7fFxxCG5b6c39oFlEXfeLPCwXeHbcnJucdz2fRbGUqaRj9m5kZsVrTIfmZTBc4ndJcgkyvIiqlVEOTWgL5ui9PhjvscgRDn7Po/CRrf69z5xYCwJPfsu5/MDjcQVUjAyw7jxyy1A/IDqGYya+Tq1FKysGsVxhHTNgelqom1s1KmsjsTaKgsVvZ9n9lzYSzsnCbtqf3cX0eRb6iUVYsGHcKgH9oTou2Z0vRJ1FmlLbwoMx8jhFrTo6fmDIPA4gfseP43BPLy4UUPQnoZ2qJ/A5zTQ08UbXMbohWOIS8NBuCmsZlOyoU9Rkkze/65qlIEfkEssIlvQKR1kV+bLIhcsnuHz5qUZXsCPcslsc93ThzjM9kM9rXJzxiX7cNx6gtePTOxlH+4qU+eMcGbw7hmhqY=

cache:
  directories:
    - node_modules

before_install:
  - npm install --global eslint@^1.10.3 jscs@^2.7.0 write-good@^0.9.1 nsp@^2.2.0
  - npm install --global karma-cli@^0.1.2

before_script:
  - npm install karma-firefox-launcher@^0.1.7 karma-phantomjs-launcher@^0.2.2
  - export KARMA_BROWSERS=Firefox,PhantomJS
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start

after_success:
  - npm install codeclimate-test-reporter@^0.1.1
  - ./node_modules/.bin/istanbul cover --report lcovonly ./node_modules/.bin/karma -- start ./test/karma.conf.js --single-run
  - cat ./coverage/lcov.info | ./node_modules/.bin/codeclimate-test-reporter
